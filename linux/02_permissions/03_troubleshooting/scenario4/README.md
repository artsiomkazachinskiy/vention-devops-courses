# README для Сценария 4: Проблема с доступом к общей директории

**Описание Сценария:**

В этом сценарии симулируется ситуация, когда несколько пользователей, входящих в одну и ту же группу, работают с общей директорией. Директория настроена так, что группа имеет права на чтение и запись, но не установлен Sticky Bit. Это приводит к тому, что пользователи могут удалять файлы, созданные другими членами группы, что не всегда является желаемым поведением для общей рабочей области.

**Как воспроизвести проблему:**

1.  Выполните скрипт `setup.sh` в этой директории с правами суперпользователя (`sudo ./setup.sh`). Это создаст необходимых пользователей и группу, а также настроит общую директорию `/shared/data` с правами `770` и владельцем/группой `userA:sharedgroup`.
2.  Переключитесь на пользователя `userA` (`su - userA`).
3.  Создайте файл в `/shared/data`, например: `touch /shared/data/file_from_userA.txt`.
4.  Выйдите из пользователя `userA` (`exit`).
5.  Переключитесь на пользователя `userB` (`su - userB`).
6.  Попытайтесь удалить файл, созданный пользователем `userA`: `rm /shared/data/file_from_userA.txt`.

**Ожидаемое поведение (проблема):**

Пользователь `userB` сможет успешно удалить файл `file_from_userA.txt`, несмотря на то, что он не является владельцем файла. Это демонстрирует отсутствие Sticky Bit на директории.

**Как диагностировать проблему:**

1.  Проверьте права доступа к директории `/shared/data` с помощью команды `ls -ld /shared/data`. Обратите внимание на девять символов прав доступа. Для этого сценария они будут примерно такие: `drwxrwx---`. Отсутствие символа `t` (или `T`) в последней позиции указывает на отсутствие Sticky Bit.
2.  Проверьте владельца и группу директории (`userA` и `sharedgroup`).
3.  Проверьте членство пользователей `userA` и `userB` в группе `sharedgroup` (`id userA` и `id userB` или `groups userA` и `groups userB`).

**Как устранить проблему:**

Чтобы пользователи могли создавать и изменять свои файлы в общей директории, но не могли удалять файлы других пользователей (кроме владельца директории), необходимо установить Sticky Bit на директории `/shared/data`. Sticky Bit гарантирует, что удалить файл в директории может только владелец файла, владелец директории или суперпользователь.

Вы можете установить Sticky Bit с помощью команды `chmod` в символьном или октальном режиме:

*   Символьный режим: `sudo chmod +t /shared/data`
*   Октальный режим: Если текущие права `770`, то для добавления Sticky Bit (который в октальной нотации равен `1000`) новые права будут `1770`. Команда: `sudo chmod 1770 /shared/data`.

**Проверка решения:**

1.  После установки Sticky Bit, повторите шаги по воспроизведению проблемы (создайте файл от `userA`, попробуйте удалить его от `userB`).
2.  Пользователь `userB` теперь не сможет удалить файл `file_from_userA.txt` (получит ошибку Permission denied).
3.  Проверьте права директории `/shared/data` снова (`ls -ld /shared/data`). Теперь в конце строки прав доступа должен появиться символ `t`: `drwxrwx--t`.

**Очистка:**

Выполните скрипт `cleanup.sh` в этой директории с правами суперпользователя (`sudo ./cleanup.sh`), чтобы удалить созданных пользователей, группу и директорию. 